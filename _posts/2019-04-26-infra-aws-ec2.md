---
layout: post
comments: true
title: "AWS-EC2에 대해서 알아보기"
date: 2019-05-01 19:20:00 +0900
categories: infra
description: AWS의 EC2에 대한 이야기
---

# AWS의 EC2란?
## EC2란 Elastic Compute Cloud의 줄인말이다.

<p>자 이전 포스트에서 AWS의 컴퓨터 한대를 '빌려' 쓴다고 말했다. 그럼 이제 직접 빌려봐야하지 않을까!!? 빌려 써보도록 하자.</p>
<p>그럼 지금부터 AWS의 EC2를 생성해서 접속까지 하는 것을 해보도록 하겠다.</p>
<p><font size="2em">본 블로그는 12개월 무료인 프리 티어에 대해서 설명 드리며, 또 한 이번 포스트는 AWS에 이미 가입 되어있는 상태에서 진행되는 점 알려드립니다.</font></p><br><br><br> 시작합니다.

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-1.png">
- 서비스 > 컴퓨팅 > EC2
<br><br><br><br>

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-2.png">
- Region - 서울 이 되어있는지를 확인한다. (이유는 제일 아래 설명하겠다.)
- 인스턴스 > 인스턴스 생성
<br><br><br><br>

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-3.png">
- Amazon Linux > 선택<br>
프리 티어에서도 스크롤을 아래로 내려다 보면 여러가지 인스턴스 들을 생성할 수있다.
그중에 우리는 리눅스 인스턴스를 생성해서 접속해 보도록하겠다.
<br><br><br><br>

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-4.png">
- 유형 - t2.micro (프리티어 사용가능) 확인
- 검토 및 시작 (세부설정은 지금은 필요없으니 넘어가도록 하겠다.)
이렇게 하면 우리는 1개의 CPU, 1GB 메모리가 달린 AWS 컴퓨터를 장만하기 시작한다.<br>
다른 유형에 대해서는 프리티어가 아닌 경우 시간 또는 분 단위로 요금이 나온다, 이 경우에 대해서는 제일 아래에서 설명 하겠다.
<br><br><br><br>

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-5.png">
- 시작하기
<br><br><br><br>

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-6.png">
- 새 키 페어 생성
- .pem 이라는 확장자를 가진 키이다. 잃어버리지 않도록 주의하며 키 이름을 설정하고 다운로드
- 인스턴스 시작<br>
키 페어는 오직 지금 밖에 다운로드만 가능하다. 그러니 잃어러비리 않도록 주의하자. 잃어버렸을 경우 방법이 있다. 그러나 좀 초급자에겐 어려울 수 있으니 여기서 는 설명하지 않도록 하겠다. (그냥 잃어버리지 말길 바란다...)
<br><br><br><br>

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-7.png">
시작한 뒤 인스턴스를 보게 되면 'Pending' 이였다가 잠시 뒤 'running'으로 바뀌게 될 것이다.<br>
이 상태가 되면 우리는 지금 AWS의 컴퓨터 한대를 장만 하게 된 것이다. 참 쉽죠?
<br><br><br><br>
<p>지금 부터 EC2를 시작했으니 돈이 나가기 시작할 것이다. 그러나 걱정하지 말자. <del>우리는 12개월 동안 무료로 사용할 수있는 프리티어 이니까!</del>자 이제 인스턴스가 돈이 안나가게 하는 방법에 대해서 알아보자. 의외로 간단하다.</p>

<img src="{{site.static_url}}/img/infra/infra-aws-ec2-8.png">
- 해당 인스턴스 오른쪽 클릭 > 인스턴스 상태 > 중지<br>
이렇게 하면 해당 인스턴스가 최소 몇 초에서 최대 5분 내로 인스턴스의 상태가 'Stopped'의 상태가 된다.
<br><br><br><br>

<p>이제 EC2 인스턴스를 생성하고 껐다 켰다를 할 수 있게 되었다. 다음으론 EC2 요금에 대해서 한번 알아보도록 하자.<br><br></p>

<p>당연하겠지만 빌려쓰는 것 이기 때문에 사용료를 지불해야한다. 사용하는 방식(비용을 지불하려고하는 형태)에는 4가지의 방식이있다.</p>

[AWS 요금형식](https://aws.amazon.com/ko/ec2/pricing/) 링크를 들어가보면 4가지의 요금 형식이 있지만 2가지만 설명하겠다.<br>
### 1. 온디멘드
<p>실행 되고있는 인스턴스에 따라 대게 시간당으로 비용을 지불하게 된다.</p>

### 2. 예약 인스턴스
<p>인스턴스를 실행하는 것을 예약으로 설정하여 만약 어느 수요가 많다는 생각이드는 시간대에 온디멘드 방식 보단 예약 인스턴스를 방식을 사용하여 계속 켜놓는 것보다 필요할 때만 인스턴스를 켜기 때문에 비용을 최대 75%정도까지 절약할수 있다. <br><br>나머지 2 방식은 독자 께서 이해해보려 노력하길 바라며 (총총...)<br><br></p>

## EC2에 대한 다양한 요금
<img src="{{site.static_url}}/img/infra/infra-aws-ec2-9.png">
<p>이 그림을 보고 간단하게 설명하고 넘어가고자 한다. 프리 티어 기준으로 생성한 인스턴스를 보도록 하겠다.<br>
보다시피 CPU 1개, 메모리 1GB짜리를 사용하는데 시간당 요금이 '시간당 0.0144 USD' 즉, 1달러(한화 약 1200원)를 쓰려면 69.4시간을 사용해야 1달러가 나온다는 말이다.<br>
이말이 무슨 말이냐고? <del> 본 블로거는 멍청한 짓을 한 것이죠.</del> 서버 컴퓨터 하나 맞추려고 50만원 정도의 돈을 투자해서 맞췄는데... 단돈 1200원이라는 돈으로 70시간의 컴퓨터를 빌릴 수 있다니... 여기서 새삼 한 번 더 AWS에 대해 놀랬음.<br>
물론 본인이 개인 서비스를 진행하고자 하는데 사용자 수가 많아지면 당연히 그림에 나와 있는 사양 가지고는 터무니가 없다고 느낄 것이다. 그래서 밑으로 내려다보면 자신에게 맞는 사양을 택해서 요금을 내면 된다. 다른 사양에 대해서는 그대들이 알아서 잘 보도록 하길 바란다.</p>

## 지역(Region)에 대해서 설명
![aws-region](/img/infra/infra-aws-region.png)
[AWS region 참조](http://jayendrapatil.com/aws-regions-availability-zones-and-edge-locations/) 관련 이미지<br><br>
<p>비용 지불 형식에 대해서 이해했다면 이제 리전에 관해서 설명을 하고자 한다.<br>
위를 봤던 그림처럼 여러 리전에 AWS가 있다고 했다. 나중에 보면 알겠지만 내가 한국에 있다고 꼭 '서울' 리전을 선택해서 사용할 필요는 없다. 이러한 리전을 정하는 기준에 대해서는 이렇게 생각하면 좋겠다. <br>
"내가 프로그램을 제작하였을 때 이 프로그램을 어느 리전에 있는 사용자가 많이 사용할 것인가?" 이러한 질문에서 당연히 한국 사람들이 많이 사용할 것이라면 '서울' 리전을 선택해서 사용하면 되고, 유럽 사람들이 많이 사용할 것이라면 '유럽' 리전을 선택해서 사용하면 된다. 왜냐하면 한국 사람들이 많이 사용하는데 '유럽' 리전을 선택해서 사용하다 보면 한국에서 유럽까지 통신하는 거리가 있기 때문에 조금 느릴 수가 있다. (리전 선택은 본인이 선택하는 것이기 때문에 느리든 말든 알아서 해도 무관하다... 내 생각은 그렇다는 것이다.)</p>

<p><br>EC2에 대해서 좀더 생각나면 쓰도록 하며 S3에 대한 이야기를 시작하려면 다음 블로그로 이동합시다!</p>

## [S3에 대한 이야기!](https://msnodeve.github.io/infra/2019-05-01-infra-aws-ec2/)

